# ğŸ¨ Flujo Completo del Trabajo - Sistema de Reservas de Hotel

## 1. VisiÃ³n General del Sistema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ CLIENTE (Usuario del Hotel)                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â”‚                                         â”‚
â”‚                    Navegador Web o App                                â”‚
â”‚                             â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ FRONTEND (Flask - Port 5000)                                   â”‚ â”‚
â”‚  â”‚ â€¢ Interfaz HTML/CSS/JS                                         â”‚ â”‚
â”‚  â”‚ â€¢ Templates dinÃ¡micos                                          â”‚ â”‚
â”‚  â”‚ â€¢ Manejo de sesiones                                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â”‚                                         â”‚
â”‚                    HTTP Requests/Responses                            â”‚
â”‚                    (JSON, Form Data)                                  â”‚
â”‚                             â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ BACKEND (Flask API - Port 5010)                                â”‚ â”‚
â”‚  â”‚ â€¢ LÃ³gica de negocio                                            â”‚ â”‚
â”‚  â”‚ â€¢ Validaciones                                                 â”‚ â”‚
â”‚  â”‚ â€¢ AutenticaciÃ³n (login)                                        â”‚ â”‚
â”‚  â”‚ â€¢ Operaciones CRUD                                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â”‚                                         â”‚
â”‚                    SQL Queries                                        â”‚
â”‚                             â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ BASE DE DATOS (MySQL)                                          â”‚ â”‚
â”‚  â”‚ â€¢ Usuarios                                                     â”‚ â”‚
â”‚  â”‚ â€¢ Habitaciones                                                 â”‚ â”‚
â”‚  â”‚ â€¢ Reservas                                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Flujo de Registro de Usuario

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       USUARIO NUEVO                                      â”‚
â”‚                    (Se quiere registrar)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 1. FRONTEND: PÃ¡gina /register        â”‚
        â”‚    â€¢ Formulario HTML con campos      â”‚
        â”‚      - name                          â”‚
        â”‚      - email                         â”‚
        â”‚      - password                      â”‚
        â”‚      - confirmPassword               â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    Usuario completa formulario
                    y presiona "Registrarse"
                               â”‚
                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 2. FRONTEND: Validaciones locales    â”‚
        â”‚    â€¢ Â¿ContraseÃ±a = confirmPassword?  â”‚
        â”‚    â€¢ Â¿Email vÃ¡lido?                  â”‚
        â”‚    â€¢ Â¿Campos completos?              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼ (Si todo OK)
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 3. FRONTEND: POST a /register        â”‚
        â”‚    JSON:{                            â”‚
        â”‚     "name": "Juan PÃ©rez",            â”‚
        â”‚     "email": "juan@mail.com",        â”‚
        â”‚     "password": "pass123",           â”‚
        â”‚     "confirmPassword": "pass123"     â”‚
        â”‚    }                                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
            Enviado a backend (localhost:5010)
                               â”‚
                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 4. BACKEND: registrar_usuario()          â”‚
        â”‚    â€¢ Recibe JSON                         â”‚
        â”‚    â€¢ Valida: password = confirmPassword  â”‚
        â”‚    â€¢ Si no coinciden â†’ error 400         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    ValidaciÃ³n OK
                               â”‚
                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 5. BACKEND: POST /usuarios/              â”‚
        â”‚    â€¢ EnvÃ­a a API del backend:            â”‚
        â”‚      {                                   â”‚
        â”‚       "name": "Juan PÃ©rez",              â”‚
        â”‚       "email": "juan@mail.com",          â”‚
        â”‚       "password": "pass123"              â”‚
        â”‚      }                                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                 Llamada a API interna
                               â”‚
                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 6. BACKEND: crear_usuario() en app.py    â”‚
        â”‚    â€¢ Recibe datos JSON                   â”‚
        â”‚    â€¢ Conecta a MySQL                     â”‚
        â”‚    â€¢ Valida: Â¿Email duplicado?          â”‚
        â”‚      SELECT id FROM usuarios             â”‚
        â”‚      WHERE email = 'juan@mail.com'       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                Â¿Email ya existe en BD?
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                     â”‚
              âœ— SÃ­                        âœ“ No
                    â”‚                     â”‚
                    â–¼                     â–¼
            (409 Conflict)         Insertar usuario
            Error JSON:            INSERT INTO usuarios
            "El usuario ya            (nombre, email, password)
             existe"               VALUES (...)
                    â”‚                     â”‚
                    â”‚                     â–¼
                    â”‚            (201 Created)
                    â”‚            Respuesta JSON:
                    â”‚            {
                    â”‚             "mensaje": "Usuario creado
                    â”‚                        exitosamente"
                    â”‚            }
                    â”‚                     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 7. FRONTEND: Procesa respuesta           â”‚
        â”‚    â€¢ Si status 201: Ã‰xito                â”‚
        â”‚      â†’ Redirige a /login                 â”‚
        â”‚    â€¢ Si status 409: Error                â”‚
        â”‚      â†’ Muestra mensaje de error          â”‚
        â”‚      â†’ Usuario intenta nuevamente        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 8. USUARIO VE PANTALLA DE LOGIN          â”‚
        â”‚    âœ“ Registrado exitosamente             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Flujo de Login (AutenticaciÃ³n)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USUARIO REGISTRADO                                    â”‚
â”‚                   (Quiere iniciar sesiÃ³n)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 1. FRONTEND: GET /login          â”‚
        â”‚    â€¢ Muestra formulario          â”‚
        â”‚      - email                     â”‚
        â”‚      - password                  â”‚
        â”‚      - botÃ³n "Iniciar sesiÃ³n"    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                   Usuario ingresa credenciales
                   y presiona botÃ³n
                               â”‚
                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 2. FRONTEND: POST /login                 â”‚
        â”‚    Form Data:                            â”‚
        â”‚    {                                     â”‚
        â”‚     "email": "juan@mail.com",            â”‚
        â”‚     "password": "pass123"                â”‚
        â”‚    }                                     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
           Enviado al servidor (puerto 5000)
                               â”‚
                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 3. FRONTEND: FunciÃ³n login()             â”‚
        â”‚    â€¢ Recibe email y password             â”‚
        â”‚    â€¢ POST a API: /usuarios/login         â”‚
        â”‚      {                                   â”‚
        â”‚       "email": "juan@mail.com",          â”‚
        â”‚       "password": "pass123"              â”‚
        â”‚      }                                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
              Llamada a backend (puerto 5010)
                               â”‚
                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 4. BACKEND: login_usuario()              â”‚
        â”‚    â€¢ Recibe email y password JSON        â”‚
        â”‚    â€¢ Conecta a MySQL                     â”‚
        â”‚    â€¢ Busca usuario:                      â”‚
        â”‚      SELECT * FROM usuarios              â”‚
        â”‚      WHERE email = 'juan@mail.com'       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    Â¿Usuario existe?
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                     â”‚
              âœ— No                        âœ“ SÃ­
                    â”‚                     â”‚
            (404 Not Found)               â–¼
            {error: "Usuario            Comparar contraseÃ±a
             no existe"}                 Â¿password == BD?
                    â”‚                     â”‚
                    â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚          â”‚                     â”‚
                    â”‚    âœ— No Match         âœ“ Match
                    â”‚          â”‚                     â”‚
                    â”‚   (401 Unauthorized)â”‚          â”‚
                    â”‚   {error: "ContraseÃ±aâ”‚          â”‚
                    â”‚    incorrecta"}     â”‚   (200 OK)
                    â”‚          â”‚          â”‚  Retorna JSON:
                    â”‚          â”‚          â”‚  {
                    â”‚          â”‚          â”‚   "id": 1,
                    â”‚          â”‚          â”‚   "nombre": "Juan",
                    â”‚          â”‚          â”‚   "email": "juan@..."
                    â”‚          â”‚          â”‚  }
                    â”‚          â”‚          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 5. FRONTEND: Recibe respuesta            â”‚
        â”‚    â€¢ Si 200:                             â”‚
        â”‚      - Extrae user_id, name, email      â”‚
        â”‚      - Guarda en sesiÃ³n Flask            â”‚
        â”‚        session['user_id'] = user_id      â”‚
        â”‚        session['user_name'] = name      â”‚
        â”‚        session['user_email'] = email     â”‚
        â”‚      - Redirige a /user/<user_id>       â”‚
        â”‚    â€¢ Si 404 o 401:                       â”‚
        â”‚      - Muestra error en login.html       â”‚
        â”‚      - Usuario intenta nuevamente        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 6. FRONTEND: GET /user/<user_id>         â”‚
        â”‚    â€¢ Verifica sesiÃ³n activa              â”‚
        â”‚    â€¢ Obtiene datos del usuario           â”‚
        â”‚    â€¢ Obtiene reservas del usuario        â”‚
        â”‚    â€¢ Muestra perfil en user.html         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 7. USUARIO AUTENTICADO                   â”‚
        â”‚    âœ“ Puede ver su perfil                 â”‚
        â”‚    âœ“ Puede ver sus reservas              â”‚
        â”‚    âœ“ Puede hacer nuevas reservas         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Flujo de CreaciÃ³n de Reserva (El flujo principal)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            USUARIO AUTENTICADO                                           â”‚
â”‚            (Quiere hacer una reserva)                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 1. FRONTEND: GET /reservar           â”‚
        â”‚    â€¢ Verifica: Â¿Usuario en sesiÃ³n?   â”‚
        â”‚    â€¢ Si NO â†’ redirige a login        â”‚
        â”‚    â€¢ Si SÃ â†’ muestra form reservar   â”‚
        â”‚      Campos:                         â”‚
        â”‚      - fecha_entrada (input date)    â”‚
        â”‚      - fecha_salida (input date)     â”‚
        â”‚      - habitacion (select)           â”‚
        â”‚      - adultos (input number)        â”‚
        â”‚      - ninos (input number)          â”‚
        â”‚      - nombre_completo (input text)  â”‚
        â”‚      - email (input email)           â”‚
        â”‚      - telefono (input tel)          â”‚
        â”‚      - metodo_pago (select)          â”‚
        â”‚      - numero_tarjeta (input)        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                Usuario completa todos los datos
                           â”‚
                           â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 2. FRONTEND: Validaciones locales    â”‚
        â”‚    â€¢ Â¿Todas las fechas vÃ¡lidas?      â”‚
        â”‚    â€¢ Â¿fecha_salida > fecha_entrada?  â”‚
        â”‚    â€¢ Â¿Adultos >= 1?                  â”‚
        â”‚    â€¢ Â¿Email vÃ¡lido?                  â”‚
        â”‚    â€¢ Â¿Tarjeta vÃ¡lida (Luhn)?         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    Validaciones OK
                               â”‚
                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 3. FRONTEND: POST /reservar                  â”‚
        â”‚    Form Data:                                â”‚
        â”‚    {                                         â”‚
        â”‚     "fecha_entrada": "2024-12-15",           â”‚
        â”‚     "fecha_salida": "2024-12-20",            â”‚
        â”‚     "habitacion": 2,                         â”‚
        â”‚     "adultos": 2,                            â”‚
        â”‚     "ninos": 1,                              â”‚
        â”‚     "nombre_completo": "Juan PÃ©rez",         â”‚
        â”‚     "email": "juan@mail.com",                â”‚
        â”‚     "telefono": "1234-5678",                 â”‚
        â”‚     "metodo_pago": "credito",                â”‚
        â”‚     "numero_tarjeta": "4111111111111111"     â”‚
        â”‚    }                                         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
           Procesado en servidor (puerto 5000)
                               â”‚
                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 4. FRONTEND: FunciÃ³n reservar()          â”‚
        â”‚    â€¢ Extrae nÃºmero de tarjeta             â”‚
        â”‚    â€¢ Calcula Ãºltimos 4 dÃ­gitos            â”‚
        â”‚    â€¢ Prepara JSON para enviar:            â”‚
        â”‚      {                                    â”‚
        â”‚       "id_habitacion": 2,                 â”‚
        â”‚       "fecha_entrada": "2024-12-15",      â”‚
        â”‚       "fecha_salida": "2024-12-20",       â”‚
        â”‚       "adultos": 2,                       â”‚
        â”‚       "ninos": 1,                         â”‚
        â”‚       "nombre_completo": "Juan PÃ©rez",    â”‚
        â”‚       "email": "juan@mail.com",           â”‚
        â”‚       "telefono": "1234-5678",            â”‚
        â”‚       "metodo_pago": "credito",           â”‚
        â”‚       "tarjeta_ultimos4": "1111"          â”‚
        â”‚      }                                    â”‚
        â”‚    â€¢ POST a /reservas/                    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
          Enviado a backend (localhost:5010)
                               â”‚
                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 5. BACKEND: crear_reserva()                  â”‚
        â”‚                                              â”‚
        â”‚    A. Validaciones bÃ¡sicas:                  â”‚
        â”‚       â€¢ Â¿Campos obligatorios presentes?      â”‚
        â”‚       â€¢ Â¿Formato de fecha correcto?          â”‚
        â”‚       â€¢ Â¿fecha_salida > fecha_entrada?       â”‚
        â”‚       â€¢ Â¿adultos y ninos son nÃºmeros?        â”‚
        â”‚                                              â”‚
        â”‚       Si alguna falla â†’ error 400            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    Validaciones OK
                               â”‚
                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 6. BACKEND: Conectar a MySQL                 â”‚
        â”‚    â€¢ get_connection()                        â”‚
        â”‚    â€¢ Crea cursor con dictionary=True         â”‚
        â”‚    â€¢ Calcula noches:                         â”‚
        â”‚      noches = (fecha_salida - fecha_entrada)â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 7. BACKEND: Validar habitaciÃ³n existe        â”‚
        â”‚    SELECT precio_por_dia FROM habitaciones   â”‚
        â”‚    WHERE id = 2                              â”‚
        â”‚                                              â”‚
        â”‚    Si NO existe â†’ error 404                  â”‚
        â”‚    Si SÃ â†’ obtiene precio                    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
        HabitaciÃ³n encontrada (precio_por_dia = 150)
                               â”‚
                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 8. BACKEND: Verificar disponibilidad         â”‚
        â”‚    SELECT * FROM reservas                    â”‚
        â”‚    WHERE id_habitacion = 2                   â”‚
        â”‚    AND (                                     â”‚
        â”‚      (fecha_entrada <= '2024-12-20' AND      â”‚
        â”‚       fecha_salida > '2024-12-15')           â”‚
        â”‚    )                                         â”‚
        â”‚                                              â”‚
        â”‚    Si hay solapamiento â†’ error 409           â”‚
        â”‚    Si NO â†’ puede reservar                    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
              HabitaciÃ³n disponible en esas fechas
                               â”‚
                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 9. BACKEND: Calcular precio total            â”‚
        â”‚    precio_total = precio_por_dia Ã— noches    â”‚
        â”‚    precio_total = 150 Ã— 5 = 750 USD          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 10. BACKEND: Insertar reserva en BD                  â”‚
        â”‚    INSERT INTO reservas (                            â”‚
        â”‚      id_habitacion,                                  â”‚
        â”‚      id_usuario,                                     â”‚
        â”‚      fecha_entrada,                                  â”‚
        â”‚      fecha_salida,                                   â”‚
        â”‚      cantidad_adultos,                               â”‚
        â”‚      cantidad_ninos,                                 â”‚
        â”‚      cantidad_personas,                              â”‚
        â”‚      precio_total,                                   â”‚
        â”‚      estado,                                         â”‚
        â”‚      nombre_completo,                                â”‚
        â”‚      email,                                          â”‚
        â”‚      telefono,                                       â”‚
        â”‚      metodo_pago,                                    â”‚
        â”‚      tarjeta_ultimos4,                               â”‚
        â”‚      created_at                                      â”‚
        â”‚    ) VALUES (                                        â”‚
        â”‚      2, 1, '2024-12-15', '2024-12-20',               â”‚
        â”‚      2, 1, 3, 750, 'pendiente',                      â”‚
        â”‚      'Juan PÃ©rez', 'juan@mail.com',                  â”‚
        â”‚      '1234-5678', 'credito', '1111', NOW()           â”‚
        â”‚    )                                                 â”‚
        â”‚                                                      â”‚
        â”‚    conn.commit()                                     â”‚
        â”‚    â†’ Obtiene ID de la reserva (Auto-increment)       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
           âœ“ Reserva insertada exitosamente
                    Nuevo ID = 8
                               â”‚
                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 11. BACKEND: Obtener datos para email        â”‚
        â”‚     SELECT nombre FROM usuarios WHERE id=1   â”‚
        â”‚     SELECT nombre FROM habitaciones WHERE id â”‚
        â”‚                                              â”‚
        â”‚     Preparar mensaje de email con:           â”‚
        â”‚     - NÃºmero de reserva: #8                  â”‚
        â”‚     - HabitaciÃ³n: Suite Ejecutiva            â”‚
        â”‚     - Fechas: 15-20 Diciembre 2024           â”‚
        â”‚     - Personas: 2 adultos, 1 niÃ±o            â”‚
        â”‚     - Total: $750 USD                        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 12. BACKEND: Enviar email (Flask-Mail)       â”‚
        â”‚                                              â”‚
        â”‚     msg = Message(                           â”‚
        â”‚       subject="Reserva confirmada",          â”‚
        â”‚       recipients=['juan@mail.com'],          â”‚
        â”‚       html=template_html                     â”‚
        â”‚     )                                        â”‚
        â”‚     mail.send(msg)                           â”‚
        â”‚                                              â”‚
        â”‚     SMTP: smtp.gmail.com:587                 â”‚
        â”‚     De: hotel@gmail.com                      â”‚
        â”‚     Para: juan@mail.com                      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
               âœ“ Email enviado correctamente
                               â”‚
                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 13. BACKEND: Cerrar conexiÃ³n                 â”‚
        â”‚     cursor.close()                           â”‚
        â”‚     conn.close()                             â”‚
        â”‚                                              â”‚
        â”‚     Retorna respuesta JSON (201 Created):    â”‚
        â”‚     {                                        â”‚
        â”‚      "id": 8,                                â”‚
        â”‚      "id_usuario": 1,                        â”‚
        â”‚      "id_habitacion": 2,                     â”‚
        â”‚      "fecha_entrada": "2024-12-15",          â”‚
        â”‚      "fecha_salida": "2024-12-20",           â”‚
        â”‚      "precio_total": 750.00,                 â”‚
        â”‚      "estado": "pendiente",                  â”‚
        â”‚      "nombre_habitacion": "Suite Ejecutiva"  â”‚
        â”‚     }                                        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                 Respuesta recibida en frontend
                               â”‚
                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 14. FRONTEND: Procesa respuesta              â”‚
        â”‚     Si status 201:                           â”‚
        â”‚       â€¢ Extrae ID y precio_total             â”‚
        â”‚       â€¢ Muestra mensaje de Ã©xito:            â”‚
        â”‚         "Reserva creada correctamente.       â”‚
        â”‚          NÂ° 8 - Total: $750"                 â”‚
        â”‚       â€¢ Mantiene formulario visible          â”‚
        â”‚                                              â”‚
        â”‚     Si status 400/409/500:                   â”‚
        â”‚       â€¢ Muestra mensaje de error             â”‚
        â”‚       â€¢ Usuario puede reintentar             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 15. USUARIO VE CONFIRMACIÃ“N                  â”‚
        â”‚     âœ“ Reserva creada                         â”‚
        â”‚     âœ“ Recibe email con detalles              â”‚
        â”‚     âœ“ Puede ir a su perfil para ver reserva  â”‚
        â”‚     âœ“ O hacer otra reserva                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Flujo de Consultar Reservas del Usuario

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ USUARIO AUTENTICADO                                         â”‚
â”‚ (Quiere ver sus reservas)                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 1. FRONTEND: GET /user/<user_id>     â”‚
        â”‚    â€¢ Verifica sesiÃ³n activa          â”‚
        â”‚    â€¢ user_id = 1                     â”‚
        â”‚    â€¢ Hace dos llamadas a backend:    â”‚
        â”‚      1) GET /usuarios/1              â”‚
        â”‚      2) GET /reservas/usuario/1      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚     1) Obtener datos del usuario          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 2. BACKEND: GET /usuarios/<id>           â”‚
        â”‚    SELECT id, nombre, email              â”‚
        â”‚    FROM usuarios WHERE id = 1            â”‚
        â”‚                                          â”‚
        â”‚    Response (200 OK):                    â”‚
        â”‚    {                                     â”‚
        â”‚     "id": 1,                             â”‚
        â”‚     "nombre": "Juan PÃ©rez",              â”‚
        â”‚     "email": "juan@mail.com"             â”‚
        â”‚    }                                     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚     2) Obtener reservas del usuario       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 3. BACKEND: GET /reservas/usuario/1          â”‚
        â”‚                                              â”‚
        â”‚    SELECT                                    â”‚
        â”‚      r.*,                                    â”‚
        â”‚      h.nombre AS nombre_habitacion,          â”‚
        â”‚      u.nombre AS nombre_usuario              â”‚
        â”‚    FROM reservas r                           â”‚
        â”‚    LEFT JOIN habitaciones h                  â”‚
        â”‚      ON r.id_habitacion = h.id               â”‚
        â”‚    LEFT JOIN usuarios u                      â”‚
        â”‚      ON r.id_usuario = u.id                  â”‚
        â”‚    WHERE r.id_usuario = 1                    â”‚
        â”‚                                              â”‚
        â”‚    Response (200 OK):                        â”‚
        â”‚    [                                         â”‚
        â”‚      {                                       â”‚
        â”‚        "id": 8,                              â”‚
        â”‚        "id_usuario": 1,                      â”‚
        â”‚        "id_habitacion": 2,                   â”‚
        â”‚        "fecha_entrada": "2024-12-15",        â”‚
        â”‚        "fecha_salida": "2024-12-20",         â”‚
        â”‚        "cantidad_personas": 3,               â”‚
        â”‚        "cantidad_adultos": 2,                â”‚
        â”‚        "cantidad_ninos": 1,                  â”‚
        â”‚        "precio_total": 750.00,               â”‚
        â”‚        "estado": "pendiente",                â”‚
        â”‚        "nombre_habitacion": "Suite Ejecutiva"â”‚
        â”‚      },                                      â”‚
        â”‚      {                                       â”‚
        â”‚        ... mÃ¡s reservas ...                  â”‚
        â”‚      }                                       â”‚
        â”‚    ]                                         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 4. FRONTEND: Procesa respuestas          â”‚
        â”‚    â€¢ Recibe usuario y reservas           â”‚
        â”‚    â€¢ Renderiza template user.html        â”‚
        â”‚    â€¢ Muestra:                            â”‚
        â”‚      - Datos del usuario                 â”‚
        â”‚      - Tabla con todas sus reservas      â”‚
        â”‚        (id, habitaciÃ³n, fechas, precio)  â”‚
        â”‚      - BotÃ³n para nueva reserva          â”‚
        â”‚      - BotÃ³n para logout                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 5. USUARIO VE SU PERFIL                  â”‚
        â”‚    âœ“ Sus datos personales                â”‚
        â”‚    âœ“ Todas sus reservas                  â”‚
        â”‚    âœ“ Puede hacer nueva reserva           â”‚
        â”‚    âœ“ Puede cerrar sesiÃ³n                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. Flujo de Ver Habitaciones

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CUALQUIER USUARIO (logueado o no)                   â”‚
â”‚ (Quiere ver las habitaciones disponibles)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 1. FRONTEND: GET /rooms             â”‚
        â”‚    â€¢ Sin validaciÃ³n de sesiÃ³n        â”‚
        â”‚    â€¢ Llama a GET /habitaciones/      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 2. BACKEND: GET /habitaciones/           â”‚
        â”‚    SELECT * FROM habitaciones            â”‚
        â”‚                                          â”‚
        â”‚    Response (200 OK):                    â”‚
        â”‚    [                                     â”‚
        â”‚      {                                   â”‚
        â”‚        "id": 1,                          â”‚
        â”‚        "nombre": "Doble EstÃ¡ndar",       â”‚
        â”‚        "descripcion": "Amplia...",       â”‚
        â”‚        "capacidad": 2,                   â”‚
        â”‚        "precio_por_dia": 85.00,          â”‚
        â”‚        "disponible": 1,                  â”‚
        â”‚        "imagen_url": "/img/..."          â”‚
        â”‚      },                                  â”‚
        â”‚      { ... mÃ¡s habitaciones ... }        â”‚
        â”‚    ]                                     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 3. FRONTEND: Renderiza rooms.html    â”‚
        â”‚    â€¢ Muestra tarjetas de habitacionesâ”‚
        â”‚    â€¢ Cada tarjeta con:               â”‚
        â”‚      - Imagen                        â”‚
        â”‚      - Nombre                        â”‚
        â”‚      - DescripciÃ³n                   â”‚
        â”‚      - Capacidad                     â”‚
        â”‚      - Precio por dÃ­a                â”‚
        â”‚      - BotÃ³n "Reservar"              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 4. USUARIO VE CATÃLOGO               â”‚
        â”‚    âœ“ Todas las habitaciones          â”‚
        â”‚    âœ“ Puede hacer click en "Reservar" â”‚
        â”‚      (si estÃ¡ logueado)              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. Mapa de PÃ¡ginas del Frontend

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SITIO WEB (Frontend)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ index.html (/index)                                      â”‚   â”‚
â”‚  â”‚ â€¢ PÃ¡gina principal                                       â”‚   â”‚
â”‚  â”‚ â€¢ NavegaciÃ³n a otras pÃ¡ginas                             â”‚   â”‚
â”‚  â”‚ â€¢ Botones: Login, Register, Ver habitaciones             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                 â†“                 â†“                 â†“            â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚     â”‚ login.html       â”‚ â”‚register.html     â”‚ â”‚rooms.html    â”‚ â”‚
â”‚     â”‚ (/login)         â”‚ â”‚ (/register)      â”‚ â”‚(/rooms)      â”‚ â”‚
â”‚     â”‚ â€¢ Form login     â”‚ â”‚ â€¢ Form registro  â”‚ â”‚ â€¢ Listar     â”‚ â”‚
â”‚     â”‚ â€¢ Session check  â”‚ â”‚ â€¢ Validaciones   â”‚ â”‚   habit.     â”‚ â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â€¢ Imagenes   â”‚ â”‚
â”‚              â”‚                    â”‚            â”‚ â€¢ Precios    â”‚ â”‚
â”‚          âœ“Login              âœ“Registro        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚              â”‚                    â”‚                    â”‚        â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚        â”‚
â”‚                       â”‚ (SesiÃ³n activa)               â”‚        â”‚
â”‚                       â–¼                                â”‚        â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚        â”‚
â”‚         â”‚ user.html (<user_id>)        â”‚               â”‚        â”‚
â”‚         â”‚ â€¢ Perfil del usuario         â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â”‚ â€¢ Reservas del usuario       â”‚                        â”‚
â”‚         â”‚ â€¢ BotÃ³n: Nueva reserva       â”‚                        â”‚
â”‚         â”‚ â€¢ BotÃ³n: Logout              â”‚                        â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                  â”‚                                              â”‚
â”‚          (Click "Nueva reserva")                                â”‚
â”‚                  â”‚                                              â”‚
â”‚                  â–¼                                              â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚         â”‚ reservar.html (/reservar)    â”‚                        â”‚
â”‚         â”‚ â€¢ Form reserva complejo      â”‚                        â”‚
â”‚         â”‚ â€¢ Seleccionar habitaciÃ³n     â”‚                        â”‚
â”‚         â”‚ â€¢ Fechas entrada/salida      â”‚                        â”‚
â”‚         â”‚ â€¢ Datos de pago              â”‚                        â”‚
â”‚         â”‚ â€¢ BotÃ³n: Confirmar           â”‚                        â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ about-us.html (/about-us)                                â”‚   â”‚
â”‚  â”‚ â€¢ InformaciÃ³n del hotel                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ contact.html (/contact)                                  â”‚   â”‚
â”‚  â”‚ â€¢ Formulario de contacto                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ services.html (/services)                                â”‚   â”‚
â”‚  â”‚ â€¢ Servicios del hotel                                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. Estructura de Archivos y Responsabilidades

```
IDS-TPFINAL/
â”‚
â”œâ”€â”€ FRONTEND (Port 5000)
â”‚   â”œâ”€â”€ app.py
â”‚   â”‚   â”œâ”€â”€ index()              â†’ GET /index
â”‚   â”‚   â”œâ”€â”€ register()           â†’ GET/POST /register
â”‚   â”‚   â”œâ”€â”€ login()              â†’ GET/POST /login
â”‚   â”‚   â”œâ”€â”€ logout()             â†’ GET /logout
â”‚   â”‚   â”œâ”€â”€ user()               â†’ GET /user/<id>
â”‚   â”‚   â”œâ”€â”€ reservar()           â†’ GET/POST /reservar
â”‚   â”‚   â”œâ”€â”€ rooms()              â†’ GET /rooms
â”‚   â”‚   â”œâ”€â”€ about()              â†’ GET /about-us
â”‚   â”‚   â”œâ”€â”€ contact()            â†’ GET /contact
â”‚   â”‚   â”œâ”€â”€ services()           â†’ GET /services
â”‚   â”‚   â””â”€â”€ registrar_usuario()  â†’ funciÃ³n auxiliar
â”‚   â”‚
â”‚   â”œâ”€â”€ template/
â”‚   â”‚   â”œâ”€â”€ base.html            â†’ template base
â”‚   â”‚   â”œâ”€â”€ index.html           â†’ pÃ¡gina principal
â”‚   â”‚   â”œâ”€â”€ register.html        â†’ formulario registro
â”‚   â”‚   â”œâ”€â”€ login.html           â†’ formulario login
â”‚   â”‚   â”œâ”€â”€ user.html            â†’ perfil usuario + reservas
â”‚   â”‚   â”œâ”€â”€ reservar.html        â†’ formulario reserva
â”‚   â”‚   â”œâ”€â”€ rooms.html           â†’ listado habitaciones
â”‚   â”‚   â”œâ”€â”€ about-us.html        â†’ informaciÃ³n
â”‚   â”‚   â”œâ”€â”€ contact.html         â†’ contacto
â”‚   â”‚   â””â”€â”€ services.html        â†’ servicios
â”‚   â”‚
â”‚   â””â”€â”€ static/
â”‚       â”œâ”€â”€ css/                 â†’ estilos (Bootstrap, custom)
â”‚       â”œâ”€â”€ js/                  â†’ lÃ³gica frontend (jQuery, plugins)
â”‚       â”œâ”€â”€ img/                 â†’ imÃ¡genes
â”‚       â”œâ”€â”€ fonts/               â†’ tipografÃ­as
â”‚       â””â”€â”€ scss/                â†’ sass compilado
â”‚
â””â”€â”€ BACKEND (Port 5010)
    â”œâ”€â”€ app.py
    â”‚   â”œâ”€â”€ ConfiguraciÃ³n Flask
    â”‚   â”œâ”€â”€ ConfiguraciÃ³n CORS
    â”‚   â”œâ”€â”€ ConfiguraciÃ³n Mail
    â”‚   â””â”€â”€ Registro de blueprints
    â”‚
    â”œâ”€â”€ db.py
    â”‚   â””â”€â”€ get_connection()     â†’ conexiÃ³n MySQL
    â”‚
    â”œâ”€â”€ routes/
    â”‚   â”œâ”€â”€ usuarios.py
    â”‚   â”‚   â”œâ”€â”€ GET /usuarios/
    â”‚   â”‚   â”œâ”€â”€ GET /usuarios/<id>
    â”‚   â”‚   â”œâ”€â”€ POST /usuarios/
    â”‚   â”‚   â””â”€â”€ POST /usuarios/login
    â”‚   â”‚
    â”‚   â”œâ”€â”€ habitaciones.py
    â”‚   â”‚   â”œâ”€â”€ GET /habitaciones/
    â”‚   â”‚   â””â”€â”€ GET /habitaciones/<id>
    â”‚   â”‚
    â”‚   â””â”€â”€ reservas.py
    â”‚       â”œâ”€â”€ GET /reservas/
    â”‚       â”œâ”€â”€ GET /reservas/usuario/<id>
    â”‚       â””â”€â”€ POST /reservas/
    â”‚
    â”œâ”€â”€ init_db.py              â†’ inicializar BD
    â”œâ”€â”€ init_db.sql             â†’ script de creaciÃ³n
    â”œâ”€â”€ requirements.txt        â†’ dependencias Python
    â”œâ”€â”€ .env                    â†’ variables de entorno
    â””â”€â”€ openapi.yaml            â†’ documentaciÃ³n API
```



## 10. Flujo de Errores Comunes

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MANEJO DE ERRORES                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚ ğŸ”´ Error 400 (Bad Request)                                      â”‚
â”‚    Causas:                                                      â”‚
â”‚    â€¢ Campos obligatorios faltantes                              â”‚
â”‚    â€¢ Formato de datos invÃ¡lido                                  â”‚
â”‚    â€¢ ContraseÃ±as no coinciden                                   â”‚
â”‚    â€¢ Fechas en formato incorrecto                               â”‚
â”‚                                                                  â”‚
â”‚ ğŸ”´ Error 401 (Unauthorized)                                     â”‚
â”‚    Causas:                                                      â”‚
â”‚    â€¢ ContraseÃ±a incorrecta en login                             â”‚
â”‚    â€¢ Token expirado (si usa tokens)                             â”‚
â”‚                                                                  â”‚
â”‚ ğŸ”´ Error 404 (Not Found)                                        â”‚
â”‚    Causas:                                                      â”‚
â”‚    â€¢ Usuario no existe                                          â”‚
â”‚    â€¢ HabitaciÃ³n no existe                                       â”‚
â”‚    â€¢ PÃ¡gina no existe                                           â”‚
â”‚                                                                  â”‚
â”‚ ğŸ”´ Error 409 (Conflict)                                         â”‚
â”‚    Causas:                                                      â”‚
â”‚    â€¢ Email duplicado al registrar                               â”‚
â”‚    â€¢ HabitaciÃ³n no disponible en esas fechas                    â”‚
â”‚    â€¢ Conflicto de datos/lÃ³gica                                  â”‚
â”‚                                                                  â”‚
â”‚ ğŸ”´ Error 500 (Server Error)                                     â”‚
â”‚    Causas:                                                      â”‚
â”‚    â€¢ ExcepciÃ³n no manejada en backend                           â”‚
â”‚    â€¢ Error de conexiÃ³n a BD                                     â”‚
â”‚    â€¢ Error al enviar email                                      â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 11. Ciclo Completo: Un Usuario Usa el Sistema

```
MOMENTO 1: Usuario nuevo descubre el sitio
â”œâ”€ Navega a http://localhost:5000/
â”œâ”€ Ve pÃ¡gina index.html con informaciÃ³n
â”œâ”€ Hace click en "Registrarse"
â””â”€ Va a /register

MOMENTO 2: Se registra
â”œâ”€ Completa formulario: name, email, password
â”œâ”€ Click en botÃ³n "Registrarse"
â”œâ”€ POST /register (Frontend)
â”œâ”€ ValidaciÃ³n en registrar_usuario()
â”œâ”€ POST /usuarios/ (Backend)
â”œâ”€ Se crea en base de datos
â”œâ”€ Recibe mensaje de Ã©xito
â””â”€ Redirigido a /login

MOMENTO 3: Inicia sesiÃ³n
â”œâ”€ Ingresa email y contraseÃ±a
â”œâ”€ POST /login (Frontend)
â”œâ”€ ValidaciÃ³n en backend
â”œâ”€ SesiÃ³n creada en Flask
â”œâ”€ Redirigido a /user/<id>
â””â”€ Ve su perfil y reservas (vacÃ­o si es nuevo)

MOMENTO 4: Explora habitaciones
â”œâ”€ Click en "Ver Habitaciones" o menÃº /rooms
â”œâ”€ GET /habitaciones/ (Backend)
â”œâ”€ Ve todas las habitaciones disponibles
â”œâ”€ Elige una que le gusta
â””â”€ Click en "Reservar"

MOMENTO 5: Hace una reserva
â”œâ”€ GET /reservar
â”œâ”€ Llena formulario complejo:
â”‚  â”œâ”€ HabitaciÃ³n (seleccionada)
â”‚  â”œâ”€ Fechas (entrada/salida)
â”‚  â”œâ”€ Personas (adultos/niÃ±os)
â”‚  â”œâ”€ Datos personales
â”‚  â””â”€ Datos de pago
â”œâ”€ POST /reservar (Frontend)
â”œâ”€ POST /reservas/ (Backend)
â”œâ”€ Validaciones en backend
â”œâ”€ Calcula precio total
â”œâ”€ Inserta en BD
â”œâ”€ EnvÃ­a email de confirmaciÃ³n
â”œâ”€ Retorna reserva creada
â”œâ”€ Usuario ve mensaje de Ã©xito
â””â”€ Email llega a su correo

MOMENTO 6: Consulta sus reservas
â”œâ”€ Va a /user/<id>
â”œâ”€ GET /usuarios/<id> (datos personales)
â”œâ”€ GET /reservas/usuario/<id> (todas sus reservas)
â”œâ”€ Ve tabla con:
â”‚  â”œâ”€ HabitaciÃ³n
â”‚  â”œâ”€ Fechas
â”‚  â”œâ”€ Precio total
â”‚  â””â”€ Estado
â””â”€ Puede hacer otra reserva o logout

MOMENTO 7: Cierra sesiÃ³n
â”œâ”€ Click en "Logout"
â”œâ”€ GET /logout
â”œâ”€ Session.clear()
â”œâ”€ Redirigido a /index
â””â”€ SesiÃ³n finalizada
```

---
